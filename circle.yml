machine:
  node:
    version: "6.9.2"
dependencies:
  pre:
    - npm install -g bower
    - sudo apt-get update; sudo apt-get install -y --only-upgrade google-chrome-stable
    - go get github.com/tcnksm/ghr
    - echo "Instalando wine ..."
    - sudo dpkg --add-architecture i386
    - sudo add-apt-repository -y ppa:ubuntu-wine/ppa
    - sudo apt-get update
    - echo ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true | sudo debconf-set-selections
    - sudo apt-get install -y wine
  post:
    - bower install
deployment:
  release:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - make binarios
      - ghr -t $GITHUB_TOKEN -u $CIRCLE_PROJECT_USERNAME -r $CIRCLE_PROJECT_REPONAME --replace `git describe --tags` binarios/
