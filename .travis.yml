language: node_js
node_js:
- 6.9.2
sudo: false
addons:
  firefox: latest
cache:
  directories:
  - "$HOME/.npm"
  - "$HOME/.cache"
before_install:
- npm config set spin false
- npm install -g bower phantomjs-prebuilt
- bower --version
- phantomjs --version
before_script:
  - export DISPLAY=:99; sh -e /etc/init.d/xvfb start; sleep 3
install:
- npm install
- bower install
script:
- npm test
after_success: make binarios
deploy:
  - provider: script
    script: ember deploy production
    skip_cleanup: true
  - provider: releases
    api_key:
      secure: NsBrmPasMSBspUBpiPtEemp8h9DwH63AX3y+seDx+/0PKEuvLFlFeV2cxbfVYsDiKS8ZrFzXvqalcKh4pbJSPttCczUWEzlEmB03v2Dmq+Cq7htvMzqRGe0/LvAgNl0cLW6+tpsgH4/ckzVX8igliRbe0vjEFMh+1BFjnFnURv4adO1cSqWhpFouKHk9WVcPT8SV6lefbLPXhSAC4XREkh0p6QeOJTU64ERYSoCDoNz7be+mrLzlCMvj0eVC4Oz3sP7sKH0FVhzPAyNm3QO+xS3HYpYE9TEZipzWUnBHTnTnVXwgSMIXZxC3W8shaJwrNInYVNBOL7d7YWWYZ2xOgbhmbu+PqWoo1RoxMlypOqMkIn/oA4F5WjpKJRkAtsH2XwB3rcz1YdMAUIvTjJZ4ieDlWRRSWPwVfVHvpn2DSYI/23tumbdUEcpaERIdS8uyJ0uYvYru5/VBdFrIoXh5DyO8sV39gm8uOt9eKirTJb9Up/tPDjbooXrMaw/5tcAHTU4rxHR3B8SRgaG2iiAGKmSQAzibOEO2PlcDwD314kHUN3WY61Qj9TRDowwCcVKz88cygONOlveNzrv/VKMSvEPuTK5hJbYJ05ydKunFwpHG4R3jAlZnlYKoofzqOfG2hl+KkWrNzQjKGfr0BLIYm7qafTAEDIMU5AKrHw6g+58=
    file: 
      - "binarios/pilas-engine-osx-64_bits.zip"
      - "binarios/pilas-engine-windows-32_bits.zip"
      - "binarios/pilas-engine-windows-64_bits.zip"
      - "file2"
    skip_cleanup: true
    on:
      tags: true
env:
  global:
    secure: dnHf18maa13Q6k93ksKZRfbEiEx+LUtwsfR+XRhX86lP4H2RdhG2UkSHsyAMgKqd5mrmEijISPJHVvDPIEi3reqOkwps0gBDIKPuiNdrf7wRLAXVasm+tv2ZS0PTmwPe95ElpRDA1Nv67Hc2FN5bNmC8MHKe4p3chCMrZ75wwU2vjPQdWSvWcOU+2Zr/saBoDpNTFnIISZEtB7g3gHXBWgERq9Yuj7pdOo6hbepa84U5u+tfY4O7hJjk6uT/4YE+fH4qRfPps+n4/BOzNl8m0bPU9/UyVyPoF5eEdeHC/Ox+PISDU/RTRofoeVk8/z00u0sGmt0fXVtNt6oY6TSmoZYrBCbrEG7G0i3Qwl/CsOsZO0/ZxhsT4lunvzI9MrsZ62ZF+pSzHaiBJpRt2lVL4YKj67GYSdtkH/t3kVRCIgwamaKw5LkStlsR9wqMUgjyfzskTeAYUxatQ/MxzAFLx4Mbsn1HPRIdK/mltzYTXJV7kmXyp6j8gRPUOYsvUzB9IOqMlrjUhPp1iUkdS7vBm80redRFdzhLS+Qytxkole0mZoBB68t0qoWjYE1m252UxVcFRXPvCDP+t0+484LtxBPBTWC9gqtMGl1d3hYxROpssE4WYv2HhEfzQY/SypdcBnJhSuuz2viy7MSJOYylHanc4fvOefJjsvXccUHFwlw=
